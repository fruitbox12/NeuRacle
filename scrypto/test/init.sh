#!/usr/bin/env bash

#set -x
set -e

#Use log
source ./log.sh

logc "New fresh start"
resim reset

XRD=030000000000000000000000000000000000000000000000000004

logc "Creating Admin account."
resim new-account
ADMIN_ACC=020d3869346218a5e8deaaf2001216dc00fcacb79fb43e30ded79a
ADMIN_PUB=044083a64afb4b630ce7683674a6cdcebc7007aef7cb08f10b2cd491b6ce24ca1204f88bd2a2068e27591f1c5cfbd4fddf9a51f7b2360d784ee1e8fbec8f7476a6
ADMIN_PIV=7c9fa136d4413fa6173637e883b6998d32e1d675f88cddff9dcbcf331820f4b8

logc "Creating 5 validators account."
resim new-account
VAL1_ACC=02e0905317d684478c275540e2ed7170f217e0c557805f7fd2a0d3
VAL1_PUB=04b9464c2aaab39bca423382bce1de92a4782b178338e316d0304585c847a0771a0e27e2d39b4fd3766305b94c8a1448c88580e2836bcbde9bb1281e3aa2bcd2ef
VAL1_PIV=35be322d094f9d154a8aba4733b8497f180353bd7ae7b0a15f90b586b549f28b

resim new-account
VAL2_ACC=02b61acea4378e307342b2b684fc35acf0238a4accb9f91e8a4364
VAL2_PUB=04a585eb2b38a582e066a119fb59aac0ba3ad941608432046c98ae5e02e6798a8ccf5db4503d36cd7c849cf0271e70f4765c31120cfd1cdedf6c57f89063180f13
VAL2_PIV=f13ee6ed54ea2aae9fc49a9faeb5da6e8ddef0e12ed5d30d35a624ae813e0485

resim new-account
VAL3_ACC=0200098f161a7691fa7ae380e41aed27ab5c4f969e8e563ce4275a
VAL3_PUB=04682f01f5b940d3d2c755f4251417d54a3ae4e05e1fb1d3d5f8eac9addb694a4c152cf88c95015b7f52a31bdaa1ed88e8cbdf9cea99a30539c6dc091a71388a02
VAL3_PIV=aae89fc0f03e2959ae4d701a80cc3915918c950b159f6abb6c92c1433b1a8534

resim new-account
VAL4_ACC=0204f0d4b3887be90714f1025f9df6d2d99fe26e5316bf1e9c58ba
VAL4_PUB=047c008408e500f2b4d7d34648d1899730fbfe36a01ef529ae8e42564820bccfb429fc1fc5ca601eb3132a8f6749e48a17f229d46b4486f04ea12eddd7a5e85210
VAL4_PIV=cbbd5f990c53684d7ae650b40fcb5656e02261b53da5f6a7d8c819c92f2828f8

resim new-account
VAL5_ACC=021810550ac72cd6d5a31c7e534394fe66339df0d1cfc0d3e21a46
VAL5_PUB=04a2fcf37334c7f60cabebe1ec08b3e3678c9bd7864f5120539531dba9a5cb9ea09f334be98bb327750dc40e796c3bb8e79fd449c9e51fec99057902b3cecf92eb
VAL5_PIV=5fd1b79ebdef9619a57916a3bfc264b54d37a792659b3693f8ab36ec3ebce448

logc "Creating 5 users account."
resim new-account
USER1_ACC=02f9835f5baa636568ba5f4d8308a7f28a7fba710960c964082069
USER1_PUB=04cf8c2ceb75507f43c9566f396e42f8b4fd229b1721f4e8577e8a33fa3772487f0e3cfd135a9f2ff83f306141296929481b6a95ea04824bd563b0c0fbb8f7a576
USER1_PIV=b0bd73e6922c0d2496dbcb99eac08eb5870090e59f6e06b1eb477d540002a5cd

resim new-account
USER2_ACC=02dbf0bacfcecf4a65419ea97d079aed4c909facc4c48ca66ef455
USER2_PUB=04b4bd97f3c11223aef84c3c7593e9661429b7738f6e921213eec573c0a32ece73d3ec0a4055ffce9d1a1d850572d741262a36257b2bdec049539f1b09e0fb43be
USER2_PIV=a4bd89d0c3e16ec03c5436d0b9b8eb1a934beeac808447459e5ee2f9a23e97d7

resim new-account
USER3_ACC=02473652804f6afa95f23a46b8eac7819a912a65504e55e0018bf9
USER3_PUB=048d29ea85a2e5c20f09180b54d7ff55d38e373c3dd701f704829ab79265bde1ad80aa5caaa062c616a3f33292ef47e54dc2f31155c29a066d064533bbb3413822
USER3_PIV=35e3a6176b50da27fcb868bf840f0e76290bd9bf55c40545e67bac66353d0674

resim new-account
USER4_ACC=02a770be0b7c1016f4d062746e33ff1f563d2a2cffe2adf70becf2
USER4_PUB=047868f9c29dccadb4674908df4a523b04c149e08c48f427f2d9c4035b8a6c418024d5f6595020ed359d71d51de5873ce322987c73babcec4fcc037d3f28bae90d
USER4_PIV=1023cd53096fa66c8a605b9cd21f77cb3f8cd12f855482b27c01e85c95b9515f

resim new-account
USER5_ACC=022d4764c89781a453754ef1ee1d61947f403bf68af933f135027e
USER5_PUB=04b9d57886dde7a6425f1286d68ab9597d045a6bb9ee75f5b794383f992dc50b06307591b58ffff08d33492752478009abc296f82462b5830ff2f71293fa153d8e
USER5_PIV=debcea1f166010e428df48387304e45c0bf7843a1fa7f1beb38f852228df789b

logc "Publish NeuRacle"
resim run publish

# Since this prototype will highly depend on epoch progress, to elaborate the test, let's choose a random epoch from 0-500
RANGE=500

epoch=$RANDOM
let "epoch %= $RANGE"

logc "Set random current epoch in range 500:" $epoch
resim set-current-epoch $epoch

